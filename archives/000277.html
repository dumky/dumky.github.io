<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>Curiosity is bliss: "Take It With You" Feed Reader</title>

<link rel="stylesheet" href="http://blog.monstuff.com/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://blog.monstuff.com/index.rdf" />

<link rel="start" href="http://blog.monstuff.com/" title="Home" />
<link rel="prev" href="http://blog.monstuff.com/archives/000276.html" title="Lock bumping (lockpicking technique)" />

<link rel="next" href="http://blog.monstuff.com/archives/000279.html" title="Comment Tracking with coComment" />



<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-74363-1";
urchinTracker();
</script>

<script type="text/javascript" language="javascript">
<!--

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

var HOST = 'blog.monstuff.com';

// Copyright (c) 1996-1997 Athenia Associates.
// http://www.webreference.com/js/
// License is granted if and only if this entire
// copyright notice is included. By Tomer Shiran.

function setCookie (name, value, expires, path, domain, secure) {
    var curCookie = name + "=" + escape(value) + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "");
    document.cookie = curCookie;
}

function getCookie (name) {
    var prefix = name + '=';
    var c = document.cookie;
    var nullstring = '';
    var cookieStartIndex = c.indexOf(prefix);
    if (cookieStartIndex == -1)
        return nullstring;
    var cookieEndIndex = c.indexOf(";", cookieStartIndex + prefix.length);
    if (cookieEndIndex == -1)
        cookieEndIndex = c.length;
    return unescape(c.substring(cookieStartIndex + prefix.length, cookieEndIndex));
}

function deleteCookie (name, path, domain) {
    if (getCookie(name))
        document.cookie = name + "=" + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

function fixDate (date) {
    var base = new Date(0);
    var skew = base.getTime();
    if (skew > 0)
        date.setTime(date.getTime() - skew);
}

function rememberMe (f) {
    var now = new Date();
    fixDate(now);
    now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
    setCookie('mtcmtauth', f.author.value, now, '', HOST, '');
    setCookie('mtcmtmail', f.email.value, now, '', HOST, '');
    setCookie('mtcmthome', f.url.value, now, '', HOST, '');
}

function forgetMe (f) {
    deleteCookie('mtcmtmail', '', HOST);
    deleteCookie('mtcmthome', '', HOST);
    deleteCookie('mtcmtauth', '', HOST);
    f.email.value = '';
    f.author.value = '';
    f.url.value = '';
}

//-->
</script>



<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://blog.monstuff.com/archives/000277.html">
<dc:title>&quot;Take It With You&quot; Feed Reader</dc:title>
<dc:description>As I mentioned in my post on TiwyWiki, Flash can offer some cross-domain communication capabilities in addition to persistent client storage. TiwyFeeds is an AJAX-based Bloglines reader with offline support and using cross-domain requests. It makes use of the Bloglines Web Services to load your subscription list and the corresponding feed data. You can try the TiwyFeeds demo, but keep in mind it&apos;s still an early prototype. You&apos;ll first need to load your subscription list, by clicking &quot;Refresh Subscriptions&quot;. This will likely prompt you for your Bloglines credentials. You can then click on the subscription tree to load the corresponding...</dc:description>
<dc:creator>Julien</dc:creator>
<dc:date>2006-01-27T17:37:35-08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-sa/1.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-sa/1.0/">
<requires rdf:resource="http://web.resource.org/cc/Attribution" />
<requires rdf:resource="http://web.resource.org/cc/Notice" />
<requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
<permits rdf:resource="http://web.resource.org/cc/Reproduction" />
<permits rdf:resource="http://web.resource.org/cc/Distribution" />
<permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
</License>
</rdf:RDF>
-->



</head>

<body>

<div id="banner">
<h1><a href="http://blog.monstuff.com/" accesskey="1">Curiosity is bliss</a></h1>
<span class="description">Julien Couvreur's programming blog and more</span>
</div>

<div id="container">

<div class="blog">







<div id="menu">
<a href="http://blog.monstuff.com/archives/000276.html">« Lock bumping (lockpicking technique)</a>&nbsp;&nbsp; 

| &nbsp;&nbsp;<a href="/archives.html">Archive list</a>&nbsp;&nbsp;
| &nbsp;&nbsp;<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a> (latest)

</div>

</div>

<div class="blog">

<!-- <h2 class="date">January 27, 2006</h2> -->




<div class="blogbody">
<!-- google_ad_section_start -->

<h2 class="title">"Take It With You" Feed Reader</h2>

<p>As I mentioned in my post on <a href="http://blog.monstuff.com/archives/000272.html">TiwyWiki</a>, Flash can offer some cross-domain communication capabilities in addition to persistent client storage.<br />
TiwyFeeds is an AJAX-based Bloglines reader with offline support and using cross-domain requests. It makes use of the <a href="http://www.bloglines.com/services/api/sync">Bloglines Web Services</a> to load your subscription list and the corresponding feed data.</p>

<p>You can try the <a href="http://blog.monstuff.com/Flash4AJAX/static/TiwyFeeds.html">TiwyFeeds demo</a>, but keep in mind it's still an early prototype.</p>

<p>You'll first need to load your subscription list, by clicking "Refresh Subscriptions". This will likely prompt you for your Bloglines credentials. You can then click on the subscription tree to load the corresponding unread entries. <br />
You can also set your browser in Offline mode and open feeds, in which case the locally cached entries will load. I haven't implemented a way of loading the cached entries corresponding to a time period though. </p>

<p>Some other possible features are expiration policy for the local cache, bookmarking ("My starred items") or full-text search.</p>

<a name="more"></a>
<p> <br />
<h4>Flash restrictions (local sandbox):</h4> When I first started looking at Flash for making cross-domain requests, I knew that Flash did have such capabilities, but also that they were restricted. In particular, I read this document, <a href="http://www.macromedia.com/devnet/flash/articles/fplayer8_security_print.html">"Security Changes in Flash Player 8"</a>, that explains how the Flash 8 Player local sandbox works. </p>

<p>The limitation that stood out is that the SWF-HTML capability (allowing javascript to call into Flash and vice-versa) isn't granted for Flash running in a local sandbox. Although it's possible for the user to grant it, it doesn't make for a good user experience. This pretty much discarded the option of running an online/offline AJAX application by copying it locally.</p>

<p><h4>Cross-domain requests:</h4> A couple of ActionScript APIs allow communication over the network, such as LoadVars.load (but it requires a specially formatted response), XMLSocket. connect (but it's not allowed if the port number is less than 1024), NetConnection.connect (but it only supports a special Flash remoting protocol) and <a href="http://livedocs.macromedia.com/flash/8/main/wwhelp/wwhimpl/js/html/wwhelp.htm?href=00002862.html">XML.load</a>.</p>

<p>I ended up going with XML.load, which allows to make a GET request to a server and retrieve an XML document. There is also XML.sendAndLoad which is similar but makes a POST request. <br />
These APIs are definitely not as flexible as XmlHttpRequest, but they are good enough to interface with the Bloglines API and probably for a number of other scenarios.</p>

<p>In terms of security, the XML.load API is restricted to a same domain policy by default. But domains can publish a policy file allowing for cross-domain requests. <br />
For example, Bloglines hosts a <a href="http://rpc.bloglines.com/crossdomain.xml">crossdomain.xml</a> file that allows requests from any domain. On the other hand, Google does not, making requests to the <a href="http://www.niallkennedy.com/blog/archives/2005/12/google_reader_a.html">Google Reader API</a> impossible from Flash.</p>

<p>The Flash4AJAX.swf Flash object used by TiwyWiki and TiwyFeeds exposes the XML.load API under the "XmlGet" function. Look at the TiwyFeeds code for more details, but essentially, it takes a url and a callback function name as the two parameters. When the request completes, the callback is called and the XML content is available thru GetVariable("retXml").</p>

<p><h4>ExternalInterface issues:</h4> Performance is the reason for requiring the callback method to use GetVariable, rather than expecting the XML string as a parameter. Passing large chunks of data into a callback is much slower than transfering it across using GetVariable.</p>

<p>Brad <a href="http://codinginparadise.org/weblog/2005/12/serious-bug-in-flash-8.html">also identified</a> this performance issue with ExternalInterface.call, as well as a bug with some characters passed thru ExternalInterface. My workaround for this second problem is to encode the strings whenever crossing the Javascript-ActionScript boundary.</p>

<p><h4>Conclusion:</h4> Flash again opens some new doors for AJAX development, by allowing cross-domain requests with a simple security policy. <br />
A more flexible API would make sense though, and the ExternalInterface API could use some improvements. Also worth mentioning is a bug in Firefox that doesn't allow <a href="http://livedocs.macromedia.com/flash/8/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00002875.html">XML.onHTTPStatus  event handler</a> to access the response status code.</p>

<p>Let me know if this is useful to you and if you incorporate it in some of your projects.</p>

<p><br />
<u>Update (2005-02-06): </u> Posted a bit of <a href="http://blog.monstuff.com/Flash4AJAX/FeedsDoc.txt">documentation for the client-side storage</a> used for the Feed Reader, as well as the <a href="http://blog.monstuff.com/Flash4AJAX/static/Flash4AJAX.as">source code for the Flash component</a>.</p>

<span class="posted">Posted by Julien on January 27, 2006. <a href="http://blog.monstuff.com/archives/000277.html" rel="bookmark">Permalink</a> <!-- -->
<br /></span>

</div>



<div class="comments-head"><a name="comments"></a>Comments</div>

<div class="comments-body">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'curiosityisbliss'; 
        var disqus_identifier = '277';
        var disqus_url = 'http://blog.monstuff.com/archives/000277.html';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>    








<div class="comments-head"><a name="trackbacks"></a>Trackbacks</div>



<!-- google_ad_section_end -->

<div class="comments-body">
<!--
Comments are closed. You can <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#106;&#117;&#108;&#105;&#101;&#110;&#46;&#99;&#111;&#117;&#118;&#114;&#101;&#117;&#114;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">contact me by email</a>. 
-->
</div>


</div>
</div>

<!-- google_ad_section_start(weight=ignore) -->
<div id="links">

<div class="sidetitle">
Recent Entries
</div>

<div class="side">
<a href="/archives.html">All entries (270)</a><br />
<br />

<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a><br />
<a href="http://blog.monstuff.com/archives/000377.html">Hans Rosling on the facts about population</a><br />
<a href="http://blog.monstuff.com/archives/000376.html">Bill Nye and Ken Ham debating on creationism</a><br />
<a href="http://blog.monstuff.com/archives/000375.html">Prediction vs Explanation</a><br />
<a href="http://blog.monstuff.com/archives/000374.html">Protectionism == Luddism</a><br />
<a href="http://blog.monstuff.com/archives/000373.html">Moderated off Boing Boing</a><br />
<a href="http://blog.monstuff.com/archives/000372.html">I &#9829; Patent Trolls</a><br />
<a href="http://blog.monstuff.com/archives/000371.html">Head Mounted Displays</a><br />
<a href="http://blog.monstuff.com/archives/000370.html">Better async programming in .Net</a><br />
<a href="http://blog.monstuff.com/archives/000369.html">Action, preferences, value</a><br />
<a href="http://blog.monstuff.com/archives/000368.html">Fresh breeze on climate debate</a><br />
<a href="http://blog.monstuff.com/archives/000367.html">On-the-fly book scanning</a><br />
<a href="http://blog.monstuff.com/archives/000366.html">State and education</a><br />
<a href="http://blog.monstuff.com/archives/000365.html">Live Geometry screencast</a><br />
<a href="http://blog.monstuff.com/archives/000364.html">Wired Science TV show</a><br />
<a href="http://blog.monstuff.com/archives/000362.html">Expectations and accountability in Economics</a><br />
<a href="http://blog.monstuff.com/archives/000361.html">Science of human action</a><br />
<a href="http://blog.monstuff.com/archives/000359.html">Reactive programming in javascript and C#</a><br />
<a href="http://blog.monstuff.com/archives/000358.html">Google Wave</a><br />
<a href="http://blog.monstuff.com/archives/000357.html">Reading facial expressions</a><br />

</div>
<!-- google_ad_section_end -->

</body>
</html>
