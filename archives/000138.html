<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>Curiosity is bliss: Upcoming fix for IE url spoofing bug</title>

<link rel="stylesheet" href="http://blog.monstuff.com/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://blog.monstuff.com/index.rdf" />

<link rel="start" href="http://blog.monstuff.com/" title="Home" />
<link rel="prev" href="http://blog.monstuff.com/archives/000135.html" title="Yo-yo contest and other videos" />

<link rel="next" href="http://blog.monstuff.com/archives/000139.html" title="Video streaming over HTTP" />



<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-74363-1";
urchinTracker();
</script>

<script type="text/javascript" language="javascript">
<!--

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

var HOST = 'blog.monstuff.com';

// Copyright (c) 1996-1997 Athenia Associates.
// http://www.webreference.com/js/
// License is granted if and only if this entire
// copyright notice is included. By Tomer Shiran.

function setCookie (name, value, expires, path, domain, secure) {
    var curCookie = name + "=" + escape(value) + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "");
    document.cookie = curCookie;
}

function getCookie (name) {
    var prefix = name + '=';
    var c = document.cookie;
    var nullstring = '';
    var cookieStartIndex = c.indexOf(prefix);
    if (cookieStartIndex == -1)
        return nullstring;
    var cookieEndIndex = c.indexOf(";", cookieStartIndex + prefix.length);
    if (cookieEndIndex == -1)
        cookieEndIndex = c.length;
    return unescape(c.substring(cookieStartIndex + prefix.length, cookieEndIndex));
}

function deleteCookie (name, path, domain) {
    if (getCookie(name))
        document.cookie = name + "=" + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

function fixDate (date) {
    var base = new Date(0);
    var skew = base.getTime();
    if (skew > 0)
        date.setTime(date.getTime() - skew);
}

function rememberMe (f) {
    var now = new Date();
    fixDate(now);
    now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
    setCookie('mtcmtauth', f.author.value, now, '', HOST, '');
    setCookie('mtcmtmail', f.email.value, now, '', HOST, '');
    setCookie('mtcmthome', f.url.value, now, '', HOST, '');
}

function forgetMe (f) {
    deleteCookie('mtcmtmail', '', HOST);
    deleteCookie('mtcmthome', '', HOST);
    deleteCookie('mtcmtauth', '', HOST);
    f.email.value = '';
    f.author.value = '';
    f.url.value = '';
}

//-->
</script>



<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://blog.monstuff.com/archives/000138.html">
<dc:title>Upcoming fix for IE url spoofing bug</dc:title>
<dc:description>Over a month back a security bug was discovered in IE that allows the address displayed in IE to be different for the actual address. Here is a description and demo of the spoof attack. Apparently, the upcoming fix includes dropping the http://user:pwd@domain/ url format support. This is a radical &quot;fix&quot; and the response by security experts (mentioned in the article) was surprising. This format isn&apos;t the root cause for the specific bug and the &quot;fix&quot; is going to break stuff (not to mention IE&apos;s support for standards). In any case, I hope they correct the bug that caused the...</dc:description>
<dc:creator>Julien</dc:creator>
<dc:date>2004-01-30T10:20:14-08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-sa/1.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-sa/1.0/">
<requires rdf:resource="http://web.resource.org/cc/Attribution" />
<requires rdf:resource="http://web.resource.org/cc/Notice" />
<requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
<permits rdf:resource="http://web.resource.org/cc/Reproduction" />
<permits rdf:resource="http://web.resource.org/cc/Distribution" />
<permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
</License>
</rdf:RDF>
-->



</head>

<body>

<div id="banner">
<h1><a href="http://blog.monstuff.com/" accesskey="1">Curiosity is bliss</a></h1>
<span class="description">Julien Couvreur's programming blog and more</span>
</div>

<div id="container">

<div class="blog">







<div id="menu">
<a href="http://blog.monstuff.com/archives/000135.html">« Yo-yo contest and other videos</a>&nbsp;&nbsp; 

| &nbsp;&nbsp;<a href="/archives.html">Archive list</a>&nbsp;&nbsp;
| &nbsp;&nbsp;<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a> (latest)

</div>

</div>

<div class="blog">

<!-- <h2 class="date">January 30, 2004</h2> -->




<div class="blogbody">
<!-- google_ad_section_start -->

<h2 class="title">Upcoming fix for IE url spoofing bug</h2>

<p>Over a month back a security bug was discovered in IE that allows the address displayed in IE to be different for the actual address. Here is a <a href="http://www.secunia.com/advisories/10395/">description and demo of the spoof attack</a>.</p>

<p>Apparently, the upcoming fix includes <a href="http://weblogs.asp.net/rmclaws/archive/2004/01/29/64705.aspx">dropping the http://user:pwd@domain/ url format support</a>.<br />
This is a radical "fix" and the response by security experts (mentioned in the article) was surprising. This format isn't the root cause for the specific bug and the "fix" is going to break stuff (not to mention IE's support for standards).<br />
In any case, I hope they correct the bug that caused the end of the url (following the %01 character) not to be displayed in the first place.</p>

<p><b>User:Pwd@Domain format:</b><br />
The problem with this url format (user:pwd@domain:port) is it confuses most end-users, who don't understand it. And the url can be obfuscated even further if the domain is an IP address in decimal format (as mentioned on slashdot at least a year back).<br />
Another factor is that this is a pretty insecure format to transmit credentials. It probably stays in the browser's history and can be sniffed over non-secured connections.</p>

<p>Richard offers an alternative fix: <a href="http://www.tallent.us/CommentView.aspx?guid=b7d926e9-d8ca-4edf-8df1-85cc75a8b28f">hiding the user:pwd part in the address bar</a>. But hiding stuff is also dangerous security-wise. <br />
Here are two other ideas:</p>

<ul>
<li><b>Color coding:</b> Help the user understand the format by using syntax highlighting. If the username and password were in red and the domain was in bold, it would always be clear what domain is used.</li>

<p><li><b>Text boxes:</b> Add two text boxes in addition to the address bar, for the username and password. They would only appear when you encounter a url of that type or if you activate them (via the View menu).</li></ul></p>

<a name="more"></a>
<p><u>Update:</u> <a href="http://simon.incutio.com/archive/2004/01/30/noMoreUsernames">Simon Willison's take on the fix</a>, with interesting pointers to Microsoft's KB article and a related Mozilla bug (which actually already mentions both suggestions above).</p>

<p><u>Update:</u> The fix is now <a href="http://weblogs.asp.net/jeffdav/archive/2004/02/02/66270.aspx">available</a>.</p>

<p><u>Update:</u> Both <a href="http://www.ietf.org/rfc/rfc1738.txt">RFC 1738</a> and <a href="http://www.ietf.org/rfc/rfc2396.txt">RFC 2396</a> mention the "userinfo" part in the generic URL scheme.<br />
But RFC 1738 then goes into the specifics of the HTTP URL scheme and it doesn't allow the username and password in the URL:<br />
<div class="code">3.3. HTTP</p>

<p>The HTTP URL scheme is used to designate Internet resources accessible using HTTP (HyperText Transfer Protocol).</p>

<p>The HTTP protocol is specified elsewhere. This specification only describes the syntax of HTTP URLs.</p>

<p>An HTTP URL takes the form:</p>

<p>      http://&lt;host>:&lt;port>/&lt;path>?&lt;searchpart></p>

<p>where &lt;host> and &lt;port> are as described in Section 3.1. If :&lt;port> is omitted, the port defaults to 80.  No user name or password is allowed.  &lt;path> is an HTTP selector, and &lt;searchpart> is a query string. The &lt;path> is optional, as is the &lt;searchpart> and its preceding "?". If neither &lt;path> nor &lt;searchpart> is present, the "/" may also be omitted.</p>

<p>Within the &lt;path> and &lt;searchpart> components, "/", ";", "?" are reserved.  The "/" character may be used within HTTP to designate a hierarchical structure.</div></p>

<p>Also, the <a href="http://www.w3.org/Addressing/URL/5_BNF.html">BNF for specific URL schemes</a> clearly allows the use of a username and password in the ftp scheme, but <b>not</b> for http.</p>

<span class="posted">Posted by Julien on January 30, 2004. <a href="http://blog.monstuff.com/archives/000138.html" rel="bookmark">Permalink</a> <!-- -->
<br /></span>

</div>



<div class="comments-head"><a name="comments"></a>Comments</div>

<div class="comments-body">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'curiosityisbliss'; 
        var disqus_identifier = '138';
        var disqus_url = 'http://blog.monstuff.com/archives/000138.html';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>    





<div class="comments-body">
<p>RFC 1738 may not appear to permit user:passwd in the URL but 2396, which obviates most of 1738 mentions in section 3.2.2 that "URL schemes that involve the direct use of an IP-based protocol to a specified server on the Internet..." [which presumably includes HTTP] "use a common syntax for the server component of the URI's scheme-specific data: @:". So to me, there's no question but that the IE fix violates the standard.</p>
<span class="comments-post">Posted by: <a href="mailto&#58;ricksplacellc&#64;hotmail&#46;com">Richard Blaine</a> at May 14, 2004 12:29 PM</span>
</div>
<div class="comments-body">
<p>The Mozilla team implemented another fix: <a href="http://weblogs.asp.net/mtrova/archive/2004/05/11/129901.aspx">http://weblogs.asp.net/mtrova/archive/2004/05/11/129901.aspx</a><br />
The username and password need to be url-escaped, which should succeed in clearing any confusion betwen a username and a hostname.</p>
<span class="comments-post">Posted by: <a href="http://blog.monstuff.com">Dumky</a> at May 14, 2004 03:02 PM</span>
</div>
<div class="comments-body">
<p>This is not a "fix" or "solution" at all. Microsoft will break next standard and it will hit the techs and some parts of business as a whole.</p>
<span class="comments-post">Posted by: <a href="http://www.decent.cz">David Graf</a> at August  1, 2004 09:21 AM</span>
</div>



<div class="comments-head"><a name="trackbacks"></a>Trackbacks</div>



<!-- google_ad_section_end -->

<div class="comments-body">
<!--
Comments are closed. You can <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#106;&#117;&#108;&#105;&#101;&#110;&#46;&#99;&#111;&#117;&#118;&#114;&#101;&#117;&#114;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">contact me by email</a>. 
-->
</div>


</div>
</div>

<!-- google_ad_section_start(weight=ignore) -->
<div id="links">

<div class="sidetitle">
Recent Entries
</div>

<div class="side">
<a href="/archives.html">All entries (270)</a><br />
<br />

<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a><br />
<a href="http://blog.monstuff.com/archives/000377.html">Hans Rosling on the facts about population</a><br />
<a href="http://blog.monstuff.com/archives/000376.html">Bill Nye and Ken Ham debating on creationism</a><br />
<a href="http://blog.monstuff.com/archives/000375.html">Prediction vs Explanation</a><br />
<a href="http://blog.monstuff.com/archives/000374.html">Protectionism == Luddism</a><br />
<a href="http://blog.monstuff.com/archives/000373.html">Moderated off Boing Boing</a><br />
<a href="http://blog.monstuff.com/archives/000372.html">I &#9829; Patent Trolls</a><br />
<a href="http://blog.monstuff.com/archives/000371.html">Head Mounted Displays</a><br />
<a href="http://blog.monstuff.com/archives/000370.html">Better async programming in .Net</a><br />
<a href="http://blog.monstuff.com/archives/000369.html">Action, preferences, value</a><br />
<a href="http://blog.monstuff.com/archives/000368.html">Fresh breeze on climate debate</a><br />
<a href="http://blog.monstuff.com/archives/000367.html">On-the-fly book scanning</a><br />
<a href="http://blog.monstuff.com/archives/000366.html">State and education</a><br />
<a href="http://blog.monstuff.com/archives/000365.html">Live Geometry screencast</a><br />
<a href="http://blog.monstuff.com/archives/000364.html">Wired Science TV show</a><br />
<a href="http://blog.monstuff.com/archives/000362.html">Expectations and accountability in Economics</a><br />
<a href="http://blog.monstuff.com/archives/000361.html">Science of human action</a><br />
<a href="http://blog.monstuff.com/archives/000359.html">Reactive programming in javascript and C#</a><br />
<a href="http://blog.monstuff.com/archives/000358.html">Google Wave</a><br />
<a href="http://blog.monstuff.com/archives/000357.html">Reading facial expressions</a><br />

</div>
<!-- google_ad_section_end -->

</body>
</html>
