<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>Curiosity is bliss: XmlHttpRequest Debugging (Firefox 1.5 update)</title>

<link rel="stylesheet" href="http://blog.monstuff.com/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://blog.monstuff.com/index.rdf" />

<link rel="start" href="http://blog.monstuff.com/" title="Home" />
<link rel="prev" href="http://blog.monstuff.com/archives/000270.html" title="Greasemonkey Hacks is out" />

<link rel="next" href="http://blog.monstuff.com/archives/000272.html" title="&quot;Take It With You&quot; Wiki" />



<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-74363-1";
urchinTracker();
</script>

<script type="text/javascript" language="javascript">
<!--

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

var HOST = 'blog.monstuff.com';

// Copyright (c) 1996-1997 Athenia Associates.
// http://www.webreference.com/js/
// License is granted if and only if this entire
// copyright notice is included. By Tomer Shiran.

function setCookie (name, value, expires, path, domain, secure) {
    var curCookie = name + "=" + escape(value) + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "");
    document.cookie = curCookie;
}

function getCookie (name) {
    var prefix = name + '=';
    var c = document.cookie;
    var nullstring = '';
    var cookieStartIndex = c.indexOf(prefix);
    if (cookieStartIndex == -1)
        return nullstring;
    var cookieEndIndex = c.indexOf(";", cookieStartIndex + prefix.length);
    if (cookieEndIndex == -1)
        cookieEndIndex = c.length;
    return unescape(c.substring(cookieStartIndex + prefix.length, cookieEndIndex));
}

function deleteCookie (name, path, domain) {
    if (getCookie(name))
        document.cookie = name + "=" + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

function fixDate (date) {
    var base = new Date(0);
    var skew = base.getTime();
    if (skew > 0)
        date.setTime(date.getTime() - skew);
}

function rememberMe (f) {
    var now = new Date();
    fixDate(now);
    now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
    setCookie('mtcmtauth', f.author.value, now, '', HOST, '');
    setCookie('mtcmtmail', f.email.value, now, '', HOST, '');
    setCookie('mtcmthome', f.url.value, now, '', HOST, '');
}

function forgetMe (f) {
    deleteCookie('mtcmtmail', '', HOST);
    deleteCookie('mtcmthome', '', HOST);
    deleteCookie('mtcmtauth', '', HOST);
    f.email.value = '';
    f.author.value = '';
    f.url.value = '';
}

//-->
</script>



<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://blog.monstuff.com/archives/000274.html">
<dc:title>XmlHttpRequest Debugging (Firefox 1.5 update)</dc:title>
<dc:description>Here&apos;s XmlHttpRequest - Debugging (version 1.2), an update on the original. The script now works in Firefox 1.5 with Greasemonkey 0.6.4. Thanks to the readers who reported the problem for their help and patience....</dc:description>
<dc:creator>Julien</dc:creator>
<dc:date>2006-01-12T12:06:15-08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-sa/1.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-sa/1.0/">
<requires rdf:resource="http://web.resource.org/cc/Attribution" />
<requires rdf:resource="http://web.resource.org/cc/Notice" />
<requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
<permits rdf:resource="http://web.resource.org/cc/Reproduction" />
<permits rdf:resource="http://web.resource.org/cc/Distribution" />
<permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
</License>
</rdf:RDF>
-->



</head>

<body>

<div id="banner">
<h1><a href="http://blog.monstuff.com/" accesskey="1">Curiosity is bliss</a></h1>
<span class="description">Julien Couvreur's programming blog and more</span>
</div>

<div id="container">

<div class="blog">







<div id="menu">
<a href="http://blog.monstuff.com/archives/000270.html">« Greasemonkey Hacks is out</a>&nbsp;&nbsp; 

| &nbsp;&nbsp;<a href="/archives.html">Archive list</a>&nbsp;&nbsp;
| &nbsp;&nbsp;<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a> (latest)

</div>

</div>

<div class="blog">

<!-- <h2 class="date">January 12, 2006</h2> -->




<div class="blogbody">
<!-- google_ad_section_start -->

<h2 class="title">XmlHttpRequest Debugging (Firefox 1.5 update)</h2>

<p>Here's <a href="http://blog.monstuff.com/archives/images/XMLHttpRequestDebugging.v1.2.user.js" title="right click &#8594; Install User Script...">XmlHttpRequest - Debugging (version 1.2)</a>, an update on the <a href="http://blog.monstuff.com/archives/000252.html">original</a>.<br />
The script now works in Firefox 1.5 with Greasemonkey 0.6.4. </p>

<p>Thanks to the readers who reported the problem for their help and patience.</p>

<a name="more"></a>
<p> <br />
The problem was caused by Greasemonkey's new injection system, which doesn't allow the userscript to access the XMLHttpRequest object in the page anymore.</p>

<p>As a workaround, the script escapes the Greasemonkey sandbox by eval'ing itself in the context of the page. <br />
On the downside, it means that the injected code loses the ability to call Greasemonkey functions such as GM_getValue, GM_setValue or GM_registerMenuCommand. This means that the console won't remember its state (position, settings,...) between page loads and I also had to disable the "hide" functionality.<br />
 <br />
Here's the essence of the change:<br />
<div class="code">function injectMe() {<br />
&nbsp;&nbsp;... original userscript ...<br />
}<br />
unsafeWindow.eval(injectMe.toString());<br />
unsafeWindow.eval("injectMe();");<br />
</div></p>

<p><u>Update (2005/01/12):</u> According to Aaron Boodman (Greasemonkey creator) on the mailing list, unsafeWindow.XMLHttpRequest should still be available from the userscript. I'll investigate a bit more, but at least the script is working again now.</p>

<p><u>Update (2005/05/12):</u> I just <a href="http://blog.monstuff.com/archives/000291.html">ported this script to IE</a>, using a bookmarklet.</p>

<span class="posted">Posted by Julien on January 12, 2006. <a href="http://blog.monstuff.com/archives/000274.html" rel="bookmark">Permalink</a> <!-- -->
<br /></span>

</div>



<div class="comments-head"><a name="comments"></a>Comments</div>

<div class="comments-body">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'curiosityisbliss'; 
        var disqus_identifier = '274';
        var disqus_url = 'http://blog.monstuff.com/archives/000274.html';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>    





<div class="comments-body">
<p>I get a "Config is not defined" error on line 117 of the greasemonkey.js script... ?</p>
<span class="comments-post">Posted by: <a href="mailto&#58;rlhuff&#64;gmail&#46;com">Ryan</a> at March  5, 2006 05:27 PM</span>
</div>
<div class="comments-body">
<p>Thanks for your XMLHttpRequest Debugging v1.2</p>

<p>Actually v1.0 disappointed me but v1.2 is awesome.</p>

<p>I deeply appreciate your working.</p>

<p>Sincerely Eric.</p>

<p>====================================<br />
Simple life High Thinking<br />
           at blog.naver.com/jinoxst<br />
====================================</p>
<span class="comments-post">Posted by: <a href="mailto&#58;jinoxst&#64;gmail&#46;com">Eric</a> at March  6, 2006 12:46 AM</span>
</div>
<div class="comments-body">
<p>Ryan,<br />
This seems to be a problem with Greasemonkey itself. I googled the error you pasted ("Config is not defined") and found some info on the Greaseblog. I didn't get the time to go through the details, but I think you'll find some tips on fixing this there.</p>

<p><a href="http://greaseblog.blogspot.com/">http://greaseblog.blogspot.com/</a><br />
Here's a comment thread where this error is mentioned:<br />
<a href="http://www.blogger.com/comment.g?blogID=11645460&postID=113598526711842205">http://www.blogger.com/comment.g?blogID=11645460&postID=113598526711842205</a><br />
</p>
<span class="comments-post">Posted by: <a href="http://blog.monstuff.com">Julien Couvreur</a> at March  6, 2006 09:39 AM</span>
</div>
<div class="comments-body">
<p>Firefox 1.5.0.2<br />
Greasemonkey 0.6.4</p>

<p>When I attempt to install XmlHttpRequest - Debugging (version 1.2), I get an alert:</p>

<p>Error installing user script:<br />
[Exception... "Component returned failure code: 0x80520012 (NS_ERROR_FILE_NOT_FOUND) [nsIChannel.open]" nsresult: "0x80520012 (NS_FILE_NOT_FOUND)" location: "JS frame :: chrome://greasemonkey/content/utils.js :: getContents :: line 167" data: no]</p>

<p>Any ideas as to what is wrong?</p>
<span class="comments-post">Posted by: <a href="mailto&#58;garykrajci&#64;yahoo&#46;com">Gary Krajci</a> at April 25, 2006 11:51 AM</span>
</div>
<div class="comments-body">
<p>Hi,</p>

<p>I've installed greasemonkey.</p>

<p>I'm using Firefox 1.5.0.6.</p>

<p>When I enter a website to monitor and navigate to the site, the debugging screen pops up, but nothing ever happens when I enter search criteria (ex: www.google.com/webhp).</p>
<span class="comments-post">Posted by: <a href="mailto&#58;djohnson&#64;lawyerweb&#46;us">David Johnson</a> at August  6, 2006 09:37 AM</span>
</div>



<div class="comments-head"><a name="trackbacks"></a>Trackbacks</div>

<div class="trackback-body">
<a name="964"></a>
<span class="trackback-post"><a href="http://my.opera.com/smile_bug/blog/show.dml/256367" target="new">XmlHttpRequest Debugging for IE</a><br />
<b>Excerpt:</b> å¯¹Ajaxçè°è¯å¾æç¨ãè½ç¶ç°å¨å¾å°ç¨IEäºï¼ä¸è¿å¯¹IEä¸çDeveloperå¾æå¸®å©ã<a href="http://blog.monstuff.com/archives/000291.html">XmlHttpRequest Debugging for IE</a>è¿éæ¯For IEç<br />
<b>Weblog:</b> BuG & bUg<br />
<b>Tracked:</b> May 15, 2006 09:00 AM</span>
</div>


<!-- google_ad_section_end -->

<div class="comments-body">
<!--
Comments are closed. You can <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#106;&#117;&#108;&#105;&#101;&#110;&#46;&#99;&#111;&#117;&#118;&#114;&#101;&#117;&#114;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">contact me by email</a>. 
-->
</div>


</div>
</div>

<!-- google_ad_section_start(weight=ignore) -->
<div id="links">

<div class="sidetitle">
Recent Entries
</div>

<div class="side">
<a href="/archives.html">All entries (270)</a><br />
<br />

<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a><br />
<a href="http://blog.monstuff.com/archives/000377.html">Hans Rosling on the facts about population</a><br />
<a href="http://blog.monstuff.com/archives/000376.html">Bill Nye and Ken Ham debating on creationism</a><br />
<a href="http://blog.monstuff.com/archives/000375.html">Prediction vs Explanation</a><br />
<a href="http://blog.monstuff.com/archives/000374.html">Protectionism == Luddism</a><br />
<a href="http://blog.monstuff.com/archives/000373.html">Moderated off Boing Boing</a><br />
<a href="http://blog.monstuff.com/archives/000372.html">I &#9829; Patent Trolls</a><br />
<a href="http://blog.monstuff.com/archives/000371.html">Head Mounted Displays</a><br />
<a href="http://blog.monstuff.com/archives/000370.html">Better async programming in .Net</a><br />
<a href="http://blog.monstuff.com/archives/000369.html">Action, preferences, value</a><br />
<a href="http://blog.monstuff.com/archives/000368.html">Fresh breeze on climate debate</a><br />
<a href="http://blog.monstuff.com/archives/000367.html">On-the-fly book scanning</a><br />
<a href="http://blog.monstuff.com/archives/000366.html">State and education</a><br />
<a href="http://blog.monstuff.com/archives/000365.html">Live Geometry screencast</a><br />
<a href="http://blog.monstuff.com/archives/000364.html">Wired Science TV show</a><br />
<a href="http://blog.monstuff.com/archives/000362.html">Expectations and accountability in Economics</a><br />
<a href="http://blog.monstuff.com/archives/000361.html">Science of human action</a><br />
<a href="http://blog.monstuff.com/archives/000359.html">Reactive programming in javascript and C#</a><br />
<a href="http://blog.monstuff.com/archives/000358.html">Google Wave</a><br />
<a href="http://blog.monstuff.com/archives/000357.html">Reading facial expressions</a><br />

</div>
<!-- google_ad_section_end -->

</body>
</html>
