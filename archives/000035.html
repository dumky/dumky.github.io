<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>Curiosity is bliss: Debugging Backwards in Time</title>

<link rel="stylesheet" href="http://blog.monstuff.com/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://blog.monstuff.com/index.rdf" />

<link rel="start" href="http://blog.monstuff.com/" title="Home" />
<link rel="prev" href="http://blog.monstuff.com/archives/000033.html" title="Custom context menu entry in IE and Mozilla" />

<link rel="next" href="http://blog.monstuff.com/archives/000036.html" title="Mechanical chain reaction Ad" />



<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-74363-1";
urchinTracker();
</script>

<script type="text/javascript" language="javascript">
<!--

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

var HOST = 'blog.monstuff.com';

// Copyright (c) 1996-1997 Athenia Associates.
// http://www.webreference.com/js/
// License is granted if and only if this entire
// copyright notice is included. By Tomer Shiran.

function setCookie (name, value, expires, path, domain, secure) {
    var curCookie = name + "=" + escape(value) + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "");
    document.cookie = curCookie;
}

function getCookie (name) {
    var prefix = name + '=';
    var c = document.cookie;
    var nullstring = '';
    var cookieStartIndex = c.indexOf(prefix);
    if (cookieStartIndex == -1)
        return nullstring;
    var cookieEndIndex = c.indexOf(";", cookieStartIndex + prefix.length);
    if (cookieEndIndex == -1)
        cookieEndIndex = c.length;
    return unescape(c.substring(cookieStartIndex + prefix.length, cookieEndIndex));
}

function deleteCookie (name, path, domain) {
    if (getCookie(name))
        document.cookie = name + "=" + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

function fixDate (date) {
    var base = new Date(0);
    var skew = base.getTime();
    if (skew > 0)
        date.setTime(date.getTime() - skew);
}

function rememberMe (f) {
    var now = new Date();
    fixDate(now);
    now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
    setCookie('mtcmtauth', f.author.value, now, '', HOST, '');
    setCookie('mtcmtmail', f.email.value, now, '', HOST, '');
    setCookie('mtcmthome', f.url.value, now, '', HOST, '');
}

function forgetMe (f) {
    deleteCookie('mtcmtmail', '', HOST);
    deleteCookie('mtcmthome', '', HOST);
    deleteCookie('mtcmtauth', '', HOST);
    f.email.value = '';
    f.author.value = '';
    f.url.value = '';
}

//-->
</script>



<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://blog.monstuff.com/archives/000035.html">
<dc:title>Debugging Backwards in Time</dc:title>
<dc:description>I found this Omniscient Debugging project a long time ago (via this O&apos;Reilly Network blog) and found it very interesting. Basically it is a black box that does an extensive trace of a running application (variable states and function calls). A GUI is provided to scroll back in time and monitor the state of the various objects and threads. If I remember correctly a custom Java class loader is used to modify the bytecode on the fly to include the extra tracing calls. This is nice because you don&apos;t need to instrument you bytecode. Update: the code for the Omniscient...</dc:description>
<dc:creator>Julien</dc:creator>
<dc:date>2003-04-16T15:12:17-08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-sa/1.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-sa/1.0/">
<requires rdf:resource="http://web.resource.org/cc/Attribution" />
<requires rdf:resource="http://web.resource.org/cc/Notice" />
<requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
<permits rdf:resource="http://web.resource.org/cc/Reproduction" />
<permits rdf:resource="http://web.resource.org/cc/Distribution" />
<permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
</License>
</rdf:RDF>
-->



</head>

<body>

<div id="banner">
<h1><a href="http://blog.monstuff.com/" accesskey="1">Curiosity is bliss</a></h1>
<span class="description">Julien Couvreur's programming blog and more</span>
</div>

<div id="container">

<div class="blog">







<div id="menu">
<a href="http://blog.monstuff.com/archives/000033.html">« Custom context menu entry in IE and Mozilla</a>&nbsp;&nbsp; 

| &nbsp;&nbsp;<a href="/archives.html">Archive list</a>&nbsp;&nbsp;
| &nbsp;&nbsp;<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a> (latest)

</div>

</div>

<div class="blog">

<!-- <h2 class="date">April 16, 2003</h2> -->




<div class="blogbody">
<!-- google_ad_section_start -->

<h2 class="title">Debugging Backwards in Time</h2>

<p>I found this <a href="http://www.lambdacs.com/debugger/debugger.html">Omniscient Debugging</a> project a long time ago (via <a href="http://www.oreillynet.com/pub/wlg/2104">this O'Reilly Network blog</a>) and found it very interesting. Basically it is a black box that does an extensive trace of a running application (variable states and function calls). A GUI is provided to scroll back in time and monitor the state of the various objects and threads.</p>

<p>If I remember correctly a custom Java class loader is used to modify the bytecode on the fly to include the extra tracing calls. This is nice because you don't need to instrument you bytecode.<br />
Update: the code for the Omniscient Debugger is now available. Check out the <i>DebugifyingClassLoader</i> and <i>Debugify</i> classes.</p>

<p><a href="http://www.visicomp.com/">RetroVue</a> is be a commercial Java debugger with similar capabilites. I haven't found a demo version of it, but their video is pretty nice.</p>

<a name="more"></a>
<p><a href="http://research.microsoft.com/~toddpro/">Todd Proebsting</a> mentioned such a black box recorder as a candidate Disruptive Programming Language technology in <a href="http://research.microsoft.com/~toddpro/papers/disruptive.ppt">this PowerPoint presentation</a>.<br />
<u>Update:</u> In my recent video lectures frenzy I found the <a href="http://www.stanford.edu/class/ee380/">recording corresponding to this lecture</a> (the page also has numerous other talks available).</p>

<p>Here are some of the links that are related and that I dug up when I investigated applying the same principle to the .NET platform.</p>

<p><a href="http://www.artima.com/insidejvm/ed2/index.html">Inside the JVM</a> (with an explanation of the loader subsystem in chapter 5).</p>

<p><a href="http://thecodeproject.com/dotnet/simple_il.asp">A simple introduction to the .NET Intermedia Language (IL)</a>.</p>

<p><a href="http://www.codeproject.com/dotnet/msilenhancement.asp">A Possible Enhancement of the MSIL</a>.</p>

<p><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemActivatorClassTopic.asp">Activator class reference</a>.</p>

<p><u>Update:</u> Unfortunately, I just noticed that unlike the Java ClassLoader, the .NET Activator class is "sealed", so it can't be inherited from. This either has to be bypassed or some other trick needs to be found in order to modify the CLR classes as they are being loaded.</p>

<p><u>Update:</u> It turns out this kind of bytecode manipulation is possible in .Net, using the Profiler APIs. I wrote the result of my investigations in <a href="http://blog.monstuff.com/archives/000058.html">Modifying IL at runtime (Part I)</a> and following episodes.</p>

<span class="posted">Posted by Julien on April 16, 2003. <a href="http://blog.monstuff.com/archives/000035.html" rel="bookmark">Permalink</a> <!-- -->
<br /></span>

</div>



<div class="comments-head"><a name="comments"></a>Comments</div>

<div class="comments-body">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'curiosityisbliss'; 
        var disqus_identifier = '35';
        var disqus_url = 'http://blog.monstuff.com/archives/000035.html';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>    








<div class="comments-head"><a name="trackbacks"></a>Trackbacks</div>

<div class="trackback-body">
<a name="37"></a>
<span class="trackback-post"><a href="http://www.cnblogs.com/dudu/archive/2004/05/19/10251.aspx" target="new">Modifying IL at runtime</a><br />
<b>Excerpt:</b> Modifying IL at runtime<br />
<b>Weblog:</b> dudu<br />
<b>Tracked:</b> May 18, 2004 10:24 PM</span>
</div>


<!-- google_ad_section_end -->

<div class="comments-body">
<!--
Comments are closed. You can <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#106;&#117;&#108;&#105;&#101;&#110;&#46;&#99;&#111;&#117;&#118;&#114;&#101;&#117;&#114;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">contact me by email</a>. 
-->
</div>


</div>
</div>

<!-- google_ad_section_start(weight=ignore) -->
<div id="links">

<div class="sidetitle">
Recent Entries
</div>

<div class="side">
<a href="/archives.html">All entries (270)</a><br />
<br />

<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a><br />
<a href="http://blog.monstuff.com/archives/000377.html">Hans Rosling on the facts about population</a><br />
<a href="http://blog.monstuff.com/archives/000376.html">Bill Nye and Ken Ham debating on creationism</a><br />
<a href="http://blog.monstuff.com/archives/000375.html">Prediction vs Explanation</a><br />
<a href="http://blog.monstuff.com/archives/000374.html">Protectionism == Luddism</a><br />
<a href="http://blog.monstuff.com/archives/000373.html">Moderated off Boing Boing</a><br />
<a href="http://blog.monstuff.com/archives/000372.html">I &#9829; Patent Trolls</a><br />
<a href="http://blog.monstuff.com/archives/000371.html">Head Mounted Displays</a><br />
<a href="http://blog.monstuff.com/archives/000370.html">Better async programming in .Net</a><br />
<a href="http://blog.monstuff.com/archives/000369.html">Action, preferences, value</a><br />
<a href="http://blog.monstuff.com/archives/000368.html">Fresh breeze on climate debate</a><br />
<a href="http://blog.monstuff.com/archives/000367.html">On-the-fly book scanning</a><br />
<a href="http://blog.monstuff.com/archives/000366.html">State and education</a><br />
<a href="http://blog.monstuff.com/archives/000365.html">Live Geometry screencast</a><br />
<a href="http://blog.monstuff.com/archives/000364.html">Wired Science TV show</a><br />
<a href="http://blog.monstuff.com/archives/000362.html">Expectations and accountability in Economics</a><br />
<a href="http://blog.monstuff.com/archives/000361.html">Science of human action</a><br />
<a href="http://blog.monstuff.com/archives/000359.html">Reactive programming in javascript and C#</a><br />
<a href="http://blog.monstuff.com/archives/000358.html">Google Wave</a><br />
<a href="http://blog.monstuff.com/archives/000357.html">Reading facial expressions</a><br />

</div>
<!-- google_ad_section_end -->

</body>
</html>
