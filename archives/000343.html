<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>Curiosity is bliss: Ubiquity command: insert-link</title>

<link rel="stylesheet" href="http://blog.monstuff.com/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://blog.monstuff.com/index.rdf" />

<link rel="start" href="http://blog.monstuff.com/" title="Home" />
<link rel="prev" href="http://blog.monstuff.com/archives/000341.html" title="Ubiquity command: beautify-js" />

<link rel="next" href="http://blog.monstuff.com/archives/000342.html" title="Ubiquity command: proxy-set" />



<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-74363-1";
urchinTracker();
</script>

<script type="text/javascript" language="javascript">
<!--

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

var HOST = 'blog.monstuff.com';

// Copyright (c) 1996-1997 Athenia Associates.
// http://www.webreference.com/js/
// License is granted if and only if this entire
// copyright notice is included. By Tomer Shiran.

function setCookie (name, value, expires, path, domain, secure) {
    var curCookie = name + "=" + escape(value) + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "");
    document.cookie = curCookie;
}

function getCookie (name) {
    var prefix = name + '=';
    var c = document.cookie;
    var nullstring = '';
    var cookieStartIndex = c.indexOf(prefix);
    if (cookieStartIndex == -1)
        return nullstring;
    var cookieEndIndex = c.indexOf(";", cookieStartIndex + prefix.length);
    if (cookieEndIndex == -1)
        cookieEndIndex = c.length;
    return unescape(c.substring(cookieStartIndex + prefix.length, cookieEndIndex));
}

function deleteCookie (name, path, domain) {
    if (getCookie(name))
        document.cookie = name + "=" + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

function fixDate (date) {
    var base = new Date(0);
    var skew = base.getTime();
    if (skew > 0)
        date.setTime(date.getTime() - skew);
}

function rememberMe (f) {
    var now = new Date();
    fixDate(now);
    now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
    setCookie('mtcmtauth', f.author.value, now, '', HOST, '');
    setCookie('mtcmtmail', f.email.value, now, '', HOST, '');
    setCookie('mtcmthome', f.url.value, now, '', HOST, '');
}

function forgetMe (f) {
    deleteCookie('mtcmtmail', '', HOST);
    deleteCookie('mtcmthome', '', HOST);
    deleteCookie('mtcmtauth', '', HOST);
    f.email.value = '';
    f.author.value = '';
    f.url.value = '';
}

//-->
</script>



<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://blog.monstuff.com/archives/000343.html">
<dc:title>Ubiquity command: insert-link</dc:title>
<dc:description>The &apos;insert-link&apos; command let&apos;s you find and insert a url from your history. Finding the url works just like the AwesomeBar. As you type characters, matches from your history get displayed. Then you can select which one you want to insert. Read on for more details and to install....</dc:description>
<dc:creator>Julien</dc:creator>
<dc:date>2008-08-31T22:54:59-08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-sa/1.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-sa/1.0/">
<requires rdf:resource="http://web.resource.org/cc/Attribution" />
<requires rdf:resource="http://web.resource.org/cc/Notice" />
<requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
<permits rdf:resource="http://web.resource.org/cc/Reproduction" />
<permits rdf:resource="http://web.resource.org/cc/Distribution" />
<permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
</License>
</rdf:RDF>
-->



</head>

<body>

<div id="banner">
<h1><a href="http://blog.monstuff.com/" accesskey="1">Curiosity is bliss</a></h1>
<span class="description">Julien Couvreur's programming blog and more</span>
</div>

<div id="container">

<div class="blog">







<div id="menu">
<a href="http://blog.monstuff.com/archives/000341.html">« Ubiquity command: beautify-js</a>&nbsp;&nbsp; 

| &nbsp;&nbsp;<a href="/archives.html">Archive list</a>&nbsp;&nbsp;
| &nbsp;&nbsp;<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a> (latest)

</div>

</div>

<div class="blog">

<!-- <h2 class="date">August 31, 2008</h2> -->




<div class="blogbody">
<!-- google_ad_section_start -->

<h2 class="title">Ubiquity command: insert-link</h2>

<p>The 'insert-link' command let's you find and insert a url from your history.<br />
Finding the url works just like the AwesomeBar. As you type characters, matches from your history get displayed. Then you can select which one you want to insert.</p>

<p><a href="http://blog.monstuff.com/archives/000343.html">Read on</a> for more details and to install.</p>

<a name="more"></a>
<p><link rel="commands" href="http://jcouv.googlecode.com/svn/trunk/Ubiquity/insert-link.js" name="Insert link" /><br />
Here's a screenshot of this command in action:<br />
<img alt='screenshot of the insert-link Ubiquity command' src='http://img301.imageshack.us/img301/7845/insertlinkscreenshotsv1.jpg' width="526" height="420" ' border='0'/><br />
 <br />
For comparison, here is a screenshot of the AwesomeBar showing the same suggestions as the 'insert-link' verb:<br />
<img alt='screenshot of the Awesome Bar' src='http://img516.imageshack.us/img516/5972/awesomebarscreenshotlz4.jpg'  width="404" height="277" border="0"/><br />
 <br />
<h4>Installation</h4><br />
By now, the Ubiquity prompt should have appeared at the top of the page offering you to install the insert-js command.</p>

<p>After you install the command, open any page with a textarea, run the Ubiquity command "insert-link" and start filtering your history. <br />
 <br />
<h4>Internals</h4><br />
This command is based off the <a href="http://developer.mozilla.org/en/nsIAutoCompleteController">nsIAutoCompleteController</a> service. The unittests in the Firefox source tree are very handy to learn how to operate that API (in this case, the examples came from firefox-3.0.1-source\mozilla\toolkit\components\places\tests\unit\test_000_frecency.js).</p>

<p>I must say that it is exciting to have access to the guts the browser like that. Experimentation is much easier with the command editor than writing full-fledged extensions, at least for simple things. <br />
On the other hand, the debugging experience could be improved. I have not found how to debug commands or inspect the styling of the previews. <br />
Also, this level of access poses a clear security risk, which will be an interesting challenge to address moving forward.</p>

<span class="posted">Posted by Julien on August 31, 2008. <a href="http://blog.monstuff.com/archives/000343.html" rel="bookmark">Permalink</a> <!-- -->
<br /></span>

</div>



<div class="comments-head"><a name="comments"></a>Comments</div>

<div class="comments-body">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'curiosityisbliss'; 
        var disqus_identifier = '343';
        var disqus_url = 'http://blog.monstuff.com/archives/000343.html';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>    





<div class="comments-body">
<p>I can't believe someone *actually* made this. Totally awesome! I'm going to use this all the time when typing emails.</p>
<span class="comments-post">Posted by: <a href="http://abcdefu.wordpress.com">Abi</a> at August 31, 2008 11:46 PM</span>
</div>
<div class="comments-body">
<p>The subscribe field for insert-list is not showing in the top of your page <br />
<a href="http://blog.monstuff.com/archives/000343.html">http://blog.monstuff.com/archives/000343.html</a></p>
<span class="comments-post">Posted by: <a href="mailto&#58;hmarstra&#64;yahoo&#46;no">Henrik Marstrander</a> at September  3, 2008 02:55 AM</span>
</div>
<div class="comments-body">
<p>This is great! I've been desiring this command for a while now.</p>

<p>We really need to figure out how to do keyboard access in the preview area (or you should implement the links as a noun type).</p>
<span class="comments-post">Posted by: <a href="http://azarask.in/blog">Aza Raskin</a> at September  5, 2008 08:16 PM</span>
</div>
<div class="comments-body">
<p>Hi Aza, <br />
I tried implementing the links as noun type, but there are two problems doing it that way:<br />
-suggestions have to be provided synchronously. The suggestions from the Places engine come back asynchronously.<br />
-suggestions do not allow rich content (yet) . I need to display some text, a link and a favicon in the suggestions for this verb.</p>
<span class="comments-post">Posted by: <a href="http://blog.monstuff.com">Julien Couvreur</a> at September  6, 2008 07:48 AM</span>
</div>
<div class="comments-body">
<p>WoW - cool feature, this realy let you speed up your workflow...nice! ;-)</p>
<span class="comments-post">Posted by: <a href="http://www.eu-neuwagen.in/">Josef</a> at September  6, 2008 10:48 AM</span>
</div>
<div class="comments-body">
<p>Can we get more than 6 entries in preview pane?</p>
<span class="comments-post">Posted by: <a href="mailto&#58;hmk1980&#64;mintemail&#46;com">dualsighter</a> at September 13, 2008 06:28 PM</span>
</div>
<div class="comments-body">
<p>@DualSighter: you can easily modify the script to display more than 6 entries. <br />
Another option would be to add a "show more" link at the bottom of the preview to expand the list as needed.</p>
<span class="comments-post">Posted by: <a href="http://blog.monstuff.com">Julien</a> at September 17, 2008 01:28 PM</span>
</div>



<div class="comments-head"><a name="trackbacks"></a>Trackbacks</div>



<!-- google_ad_section_end -->

<div class="comments-body">
<!--
Comments are closed. You can <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#106;&#117;&#108;&#105;&#101;&#110;&#46;&#99;&#111;&#117;&#118;&#114;&#101;&#117;&#114;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">contact me by email</a>. 
-->
</div>


</div>
</div>

<!-- google_ad_section_start(weight=ignore) -->
<div id="links">

<div class="sidetitle">
Recent Entries
</div>

<div class="side">
<a href="/archives.html">All entries (270)</a><br />
<br />

<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a><br />
<a href="http://blog.monstuff.com/archives/000377.html">Hans Rosling on the facts about population</a><br />
<a href="http://blog.monstuff.com/archives/000376.html">Bill Nye and Ken Ham debating on creationism</a><br />
<a href="http://blog.monstuff.com/archives/000375.html">Prediction vs Explanation</a><br />
<a href="http://blog.monstuff.com/archives/000374.html">Protectionism == Luddism</a><br />
<a href="http://blog.monstuff.com/archives/000373.html">Moderated off Boing Boing</a><br />
<a href="http://blog.monstuff.com/archives/000372.html">I &#9829; Patent Trolls</a><br />
<a href="http://blog.monstuff.com/archives/000371.html">Head Mounted Displays</a><br />
<a href="http://blog.monstuff.com/archives/000370.html">Better async programming in .Net</a><br />
<a href="http://blog.monstuff.com/archives/000369.html">Action, preferences, value</a><br />
<a href="http://blog.monstuff.com/archives/000368.html">Fresh breeze on climate debate</a><br />
<a href="http://blog.monstuff.com/archives/000367.html">On-the-fly book scanning</a><br />
<a href="http://blog.monstuff.com/archives/000366.html">State and education</a><br />
<a href="http://blog.monstuff.com/archives/000365.html">Live Geometry screencast</a><br />
<a href="http://blog.monstuff.com/archives/000364.html">Wired Science TV show</a><br />
<a href="http://blog.monstuff.com/archives/000362.html">Expectations and accountability in Economics</a><br />
<a href="http://blog.monstuff.com/archives/000361.html">Science of human action</a><br />
<a href="http://blog.monstuff.com/archives/000359.html">Reactive programming in javascript and C#</a><br />
<a href="http://blog.monstuff.com/archives/000358.html">Google Wave</a><br />
<a href="http://blog.monstuff.com/archives/000357.html">Reading facial expressions</a><br />

</div>
<!-- google_ad_section_end -->

</body>
</html>
