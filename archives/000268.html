<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>Curiosity is bliss: XmlHttpRequest Debugging (update)</title>

<link rel="stylesheet" href="http://blog.monstuff.com/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://blog.monstuff.com/index.rdf" />

<link rel="start" href="http://blog.monstuff.com/" title="Home" />
<link rel="prev" href="http://blog.monstuff.com/archives/000267.html" title="ArsTechnica - Single Page View" />

<link rel="next" href="http://blog.monstuff.com/archives/000270.html" title="Greasemonkey Hacks is out" />



<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-74363-1";
urchinTracker();
</script>

<script type="text/javascript" language="javascript">
<!--

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

var HOST = 'blog.monstuff.com';

// Copyright (c) 1996-1997 Athenia Associates.
// http://www.webreference.com/js/
// License is granted if and only if this entire
// copyright notice is included. By Tomer Shiran.

function setCookie (name, value, expires, path, domain, secure) {
    var curCookie = name + "=" + escape(value) + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "");
    document.cookie = curCookie;
}

function getCookie (name) {
    var prefix = name + '=';
    var c = document.cookie;
    var nullstring = '';
    var cookieStartIndex = c.indexOf(prefix);
    if (cookieStartIndex == -1)
        return nullstring;
    var cookieEndIndex = c.indexOf(";", cookieStartIndex + prefix.length);
    if (cookieEndIndex == -1)
        cookieEndIndex = c.length;
    return unescape(c.substring(cookieStartIndex + prefix.length, cookieEndIndex));
}

function deleteCookie (name, path, domain) {
    if (getCookie(name))
        document.cookie = name + "=" + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

function fixDate (date) {
    var base = new Date(0);
    var skew = base.getTime();
    if (skew > 0)
        date.setTime(date.getTime() - skew);
}

function rememberMe (f) {
    var now = new Date();
    fixDate(now);
    now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
    setCookie('mtcmtauth', f.author.value, now, '', HOST, '');
    setCookie('mtcmtmail', f.email.value, now, '', HOST, '');
    setCookie('mtcmthome', f.url.value, now, '', HOST, '');
}

function forgetMe (f) {
    deleteCookie('mtcmtmail', '', HOST);
    deleteCookie('mtcmthome', '', HOST);
    deleteCookie('mtcmtauth', '', HOST);
    f.email.value = '';
    f.author.value = '';
    f.url.value = '';
}

//-->
</script>



<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://blog.monstuff.com/archives/000268.html">
<dc:title>XmlHttpRequest Debugging (update)</dc:title>
<dc:description>Here&apos;s XmlHttpRequest - Debugging (version 1.1), an update on the original. The fixed bug: onreadystatechange callbacks weren&apos;t getting triggered properly. The reason was the native XmlHttpRequest object doesn&apos;t call onreadystatechange if it also has an onload callback. The replacement onload handler now calls any onload and onreadystatechange callback from the user, emulating the same logic. Update (2006/02/20): A newer version is available, supporting Firefox 1.5 with Greasemonkey 0.6.4....</dc:description>
<dc:creator>Julien</dc:creator>
<dc:date>2005-10-21T17:11:42-08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-sa/1.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-sa/1.0/">
<requires rdf:resource="http://web.resource.org/cc/Attribution" />
<requires rdf:resource="http://web.resource.org/cc/Notice" />
<requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
<permits rdf:resource="http://web.resource.org/cc/Reproduction" />
<permits rdf:resource="http://web.resource.org/cc/Distribution" />
<permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
</License>
</rdf:RDF>
-->



</head>

<body>

<div id="banner">
<h1><a href="http://blog.monstuff.com/" accesskey="1">Curiosity is bliss</a></h1>
<span class="description">Julien Couvreur's programming blog and more</span>
</div>

<div id="container">

<div class="blog">







<div id="menu">
<a href="http://blog.monstuff.com/archives/000267.html">« ArsTechnica - Single Page View</a>&nbsp;&nbsp; 

| &nbsp;&nbsp;<a href="/archives.html">Archive list</a>&nbsp;&nbsp;
| &nbsp;&nbsp;<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a> (latest)

</div>

</div>

<div class="blog">

<!-- <h2 class="date">October 21, 2005</h2> -->




<div class="blogbody">
<!-- google_ad_section_start -->

<h2 class="title">XmlHttpRequest Debugging (update)</h2>

<p>Here's <a href="http://blog.monstuff.com/archives/images/XMLHttpRequestDebugging.v1.1.user.js" title="right click &#8594; Install User Script...">XmlHttpRequest - Debugging (version 1.1)</a>, an update on the <a href="http://blog.monstuff.com/archives/000252.html">original</a>.</p>

<p>The fixed bug: onreadystatechange callbacks weren't getting triggered properly. The reason was the native XmlHttpRequest object doesn't call onreadystatechange if it also has an onload callback. The replacement onload handler now calls any onload and onreadystatechange callback from the user, emulating the same logic. </p>

<p><u>Update (2006/02/20):</u> A <a href="http://blog.monstuff.com/archives/000274.html">newer version</a> is available, supporting Firefox 1.5 with Greasemonkey 0.6.4.</p>

<a name="more"></a>


<span class="posted">Posted by Julien on October 21, 2005. <a href="http://blog.monstuff.com/archives/000268.html" rel="bookmark">Permalink</a> <!-- -->
<br /></span>

</div>



<div class="comments-head"><a name="comments"></a>Comments</div>

<div class="comments-body">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'curiosityisbliss'; 
        var disqus_identifier = '268';
        var disqus_url = 'http://blog.monstuff.com/archives/000268.html';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>    





<div class="comments-body">
<p>I've tried to install this script on three different machines, all running the latest version of XP, with Greasemonkey 0.5.3 and Firefox 1.0.7.  In every case, sadly, I get the menu item "User Script Commands" greyed out. There's no javascript error, so I'm really puzzled. Why does this clearly work so well for others, yet on three different Windows machines it won't work for me? </p>
<span class="comments-post">Posted by: <a href="mailto&#58;errantacademic&#64;gmail&#46;com">Anthony</a> at November 14, 2005 06:54 PM</span>
</div>
<div class="comments-body">
<p>Anthony, I'll follow up with you by email. Have you tried the older version (v1.0)? </p>
<span class="comments-post">Posted by: <a href="http://blog.monstuff.com">Julien Couvreur</a> at November 15, 2005 12:22 PM</span>
</div>
<div class="comments-body">
<p>Hey I cannot get it to work. The window pops up when I call the ajax enabled page. The script does not work, and I get nothing on the window either. The 'User Script Commands' is greyed out too</p>
<span class="comments-post">Posted by: <a href="mailto&#58;ashish&#64;om-biz&#46;com">ashish</a> at December  5, 2005 11:22 PM</span>
</div>
<div class="comments-body">
<p>I cannot get this to work for the life of me, I've tried it locally, on digg, gmail, google maps, etc. The div comes up, I cannot move it and it doesn't record any of the request/responses.</p>
<span class="comments-post">Posted by: <a href="mailto&#58;jplush76&#64;gmail&#46;com">Jim</a> at December 21, 2005 04:09 PM</span>
</div>
<div class="comments-body">
<p>I can't get it to work either.  Same tests as Jim.  Would love to have a fix!</p>
<span class="comments-post">Posted by: <a href="mailto&#58;kevinold&#64;gmail&#46;com">Kevin</a> at December 28, 2005 03:42 PM</span>
</div>
<div class="comments-body">
<p>I noticed in my javascript console it keeps saying "XMLHttpRequest has no properties", on lines 12 and 48. </p>

<p>I still cannot get this script working or the one you wrote that just writes to the console. Would love to get this puppy workin ;)</p>
<span class="comments-post">Posted by: <a href="mailto&#58;jplush76&#64;gmail&#46;com">Jim</a> at December 29, 2005 09:53 PM</span>
</div>
<div class="comments-body">
<p>Sorry for the problems with Firefox 1.5 and Greasemonkey 0.6.4. I'm still looking into the issue and hope to get a fix ready soon.</p>
<span class="comments-post">Posted by: <a href="http://blog.monstuff.com">Julien Couvreur</a> at January  4, 2006 09:27 PM</span>
</div>
<div class="comments-body">
<p>Excellent script ! But i'm waitin' (avec impatience :) the fix for firefox 1.5. Keep up the good work.</p>
<span class="comments-post">Posted by: <a href="mailto&#58;none&#64;none&#46;net">cow</a> at January  5, 2006 06:01 AM</span>
</div>
<div class="comments-body">
<p>Great tool! I'm using it to debug a site and it seems to duplicate my ajax postings. I have a button that adds another element. with this script activated, it makes two elements, etc.</p>

<p>Is that a me thing?</p>
<span class="comments-post">Posted by: <a href="http://www.johnwilker.com">John</a> at March 29, 2006 02:20 PM</span>
</div>
<div class="comments-body">
<p>I am also seeing duplicate post problem.</p>
<span class="comments-post">Posted by: <a href="mailto&#58;prathap_mr&#64;yahoo&#46;com">Pratap</a> at May 23, 2006 06:07 AM</span>
</div>
<div class="comments-body">
<p>I'm getting this to work great on my local machine, but when I publish it to the server, it blows up at dojo.flash.comm.XmlHttp. If I display dojo.flash.comm, it is there with a list of methods, but XmlHttp isn't one of them. Any idea why it would not have this method?</p>

<p>Thanks for any help/ideas.</p>

<p>Ron<br />
</p>
<span class="comments-post">Posted by: <a href="mailto&#58;rd_grimes&#64;yahoo&#46;com">Ron</a> at June 22, 2006 02:58 PM</span>
</div>



<div class="comments-head"><a name="trackbacks"></a>Trackbacks</div>



<!-- google_ad_section_end -->

<div class="comments-body">
<!--
Comments are closed. You can <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#106;&#117;&#108;&#105;&#101;&#110;&#46;&#99;&#111;&#117;&#118;&#114;&#101;&#117;&#114;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">contact me by email</a>. 
-->
</div>


</div>
</div>

<!-- google_ad_section_start(weight=ignore) -->
<div id="links">

<div class="sidetitle">
Recent Entries
</div>

<div class="side">
<a href="/archives.html">All entries (270)</a><br />
<br />

<a href="http://blog.monstuff.com/archives/000380.html">Thick displays</a><br />
<a href="http://blog.monstuff.com/archives/000377.html">Hans Rosling on the facts about population</a><br />
<a href="http://blog.monstuff.com/archives/000376.html">Bill Nye and Ken Ham debating on creationism</a><br />
<a href="http://blog.monstuff.com/archives/000375.html">Prediction vs Explanation</a><br />
<a href="http://blog.monstuff.com/archives/000374.html">Protectionism == Luddism</a><br />
<a href="http://blog.monstuff.com/archives/000373.html">Moderated off Boing Boing</a><br />
<a href="http://blog.monstuff.com/archives/000372.html">I &#9829; Patent Trolls</a><br />
<a href="http://blog.monstuff.com/archives/000371.html">Head Mounted Displays</a><br />
<a href="http://blog.monstuff.com/archives/000370.html">Better async programming in .Net</a><br />
<a href="http://blog.monstuff.com/archives/000369.html">Action, preferences, value</a><br />
<a href="http://blog.monstuff.com/archives/000368.html">Fresh breeze on climate debate</a><br />
<a href="http://blog.monstuff.com/archives/000367.html">On-the-fly book scanning</a><br />
<a href="http://blog.monstuff.com/archives/000366.html">State and education</a><br />
<a href="http://blog.monstuff.com/archives/000365.html">Live Geometry screencast</a><br />
<a href="http://blog.monstuff.com/archives/000364.html">Wired Science TV show</a><br />
<a href="http://blog.monstuff.com/archives/000362.html">Expectations and accountability in Economics</a><br />
<a href="http://blog.monstuff.com/archives/000361.html">Science of human action</a><br />
<a href="http://blog.monstuff.com/archives/000359.html">Reactive programming in javascript and C#</a><br />
<a href="http://blog.monstuff.com/archives/000358.html">Google Wave</a><br />
<a href="http://blog.monstuff.com/archives/000357.html">Reading facial expressions</a><br />

</div>
<!-- google_ad_section_end -->

</body>
</html>
