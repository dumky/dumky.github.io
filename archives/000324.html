---
title: "One-click video streaming from home server"
date: 2007-09-15 11:43:12 +0800
disqus_identifier: 324
disqus_url: http://blog.monstuff.com/archives/000324.html
---
{% raw %}
<p><img src="http://farm2.static.flickr.com/1349/753713999_ee2283e99d_m_d.jpg" alt="Kitty with remote" style="float: right; padding: 10px 0px 0px 20px; width:240; height:180; border: none" /></p>

<p>I have some video files on a home server, which I want to watch on my laptop in the living room with the least possible hassle. The files are accessible thru HTTP. They can be played using MPlayer (thru <a href="http://mpui.sourceforge.net/">MPUI</a> on Windows) and VLC, which can stream videos over HTTP.</p>

<p>But the step from finding the video using my browser to opening the video in one of these media players involves an annoying copy and paste operation.</p>

<p>I wrote the <a href="http://jcouv.googlecode.com/svn/trunk/Greasemonkey-misc/OneClickVideoStreaming.user.js">One-Click Video Streaming</a> Greasemonkey script to solve this. I can now start playing videos with a single click on the directory listing page in my browser.<br />
The script adds a "one-click play" icon next to each video in the directory listings. Clicking that icon launches a media player, automatically opening the corresponding video stream.</p>

<p>Note that when you install the script, you need to specific the url patterns that should trigger this script. In my case, that's the root url for my media server.</p>
<p> <br />
If you are curious about how this script works, here's the gist. <br />
First, notice that if you create a playlist file containing the url to a video as the single line, opening that file will get the url loaded by the media player. <br />
Then, realize that you can generate playlist "files" on the client-side (avoiding any server-side code change) using <a href="http://en.wikipedia.org/wiki/Data:_URI_scheme">data: urls</a>.<br />
Finally, get the script to identify all the video links (extension ".avi", in the current implementation), generate and insert a data: url next to each one. <br />
That's it.</p>

<p>Obviously, this solution is still a one-off. There are many scenarios that are similar in nature having to do with either specific URI schemes or mime-types, which call for a more generic solution. <br />
For example, one-click <a href="http://weblog.infoworld.com/udell/2004/01/21.html">subscription to RSS feeds in your favorite aggregator</a>, <a href="http://blog.monstuff.com/archives/000238.html">composing/sending of email from mailto: links in Gmail</a>, or <a href="http://userscripts.org/scripts/show/11310">downloading of ed2k: links by a remote instance of Emule</a>.<br />
Some cool stuff around this problem is coming in Firefox 3, but that will be the topic of another post. </p>

______________________________________

<p>The script contains<br />
onclick=\"deleteFile('" + link.href + "')</p>

<p>but I can't see deleteFile defined anywhere. What gives?</p>

Posted by: <a href="mailto&#58;splintor&#64;gmail&#46;com">splintor</a> (September 17, 2007 02:18 PM)

______________________________________

<p>That's just a commented line, which I copied from another script. That other script lets me delete a file directly from browser by adding a delete icon next to each entry in the listing.<br />
I'll go ahead and remove that comment.<br />
Thanks for picking that up.</p>

Posted by: <a href="http://blog.monstuff.com">Julien</a> (September 19, 2007 09:34 AM)



{% endraw %}