---
title: IGN - Single Page View
date: 2005-07-20 17:39:41 +0800
disqus_identifier: 257
disqus_url: http://blog.monstuff.com/archives/000257.html
---

<p>Just finished the <a href="http://blog.monstuff.com/archives/images/IGNSinglePageView.user.js" title="right click &#8594; Install User Script...">IGN - Single Page View</a> user script for Greasemonkey. Instead of having to turn pages, the first page of IGN articles display the content of the whole article.</p>

<p>It keeps the general structure of the <a href="http://blog.monstuff.com/archives/000255.html">ACM Queue - Single Page View</a> script. It's modularized better though, so that it can be re-used as a mini-framework for future "single page view" scripts. Essentially, you need to customize how to compute the url for the next page, how to merge the next page's content into the main page and when to stop loading more pages.</p>
<p>Mark Rickerby also wrote a similar script, called <a href="http://os.coretxt.net.nz/gm/">IGN Splicer</a> and we've been in touch over email, but it suffers from some timing issues: if the responses for various pages don't arrive in the right order, the order of the content can get messed up. <br />
In contrast, "IGN - Single Page View" loads the pages sequentially, rather than in parallel, so it doesn't run into that problem.</p>

<p><b>Greasemonkey security bulletin:</b><br />
On a separate topic, Mark Pilgrim identified a <a href="http://mozdev.org/pipermail/greasemonkey/2005-July/004022.html">severe vulnerability</a> in Greasemonkey, earlier this week. Simon also wrote up a <a href="http://simon.incutio.com/archive/2005/07/20/vulnerability">good description of the flaw</a>.<br />
The core issue is that <a href="http://diveintogreasemonkey.org/api/index.html">powerful APIs (GM_*)</a> that are made available to user scripts can actually be accessed within the scope of the host page. <br />
It is recommended that you upgrade to the "neutered" version of Greasemonkey, <a href="http://greasemonkey.mozdev.org/changes/0.3.5.html">0.3.5</a>, which has all those APIs are disabled as an interim fix. This means some scripts (such as "XMLHttpRequest Tracing") are broken until a proper fix is found. Keep an eye on <a href="http://greaseblog.blogspot.com/">Greaseblog</a> for updates.</p>

<p>Because this can <a href="http://www.mozdev.org/pipermail/greasemonkey/2005-July/004009.html">only be exploited for sites that are @included</a> in at least one script when you visit them, another mitigation is to tighten the configuration. This begins by removing scripts that run on all sites ("@include *"). <br />
Also, be sure to have non-ambiguous site specifications. For example, "http://google.com*" would match "http://google.com.evilsite.com", but "http://google.com/*" is safer.</p>

<p>Mark also wrote a <a href="http://www.mozdev.org/pipermail/greasemonkey/2005-July/004095.html">script to detect if you are vulnerable</a>, which he runs on <a href="http://diveintogreasemonkey.org/">Dive Into Greasemonkey</a>. If you run a version other than 0.3.5 or have any "@include *" script, you will get a flashy warning when visiting that site (which has tons of info and tricks on Greasemonkey btw).</p>

<p><br />
<b>Some more Greasemonkey related news:</b><br />
A new user script repository service was launched, <a href="http://greasemonkeyed.com">Greasemonkeyed.com</a>.</p>

______________________________________




